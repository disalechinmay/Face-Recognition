import tensorflow as tf
from tensorflow import keras
import numpy as np

import os
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'


#X = np.array([[0,0],[0,1],[1,0],[1,1]])
#y = np.array([[0],[1],[1],[0]])

X = np.array([[5.67469951822, 3.01786596509, 3.38644243788, 4.40128707661, 5.6145555955, 6.68856446685, 7.81805994584, 8.67407231537, 1.0, 3.80675806429, 3.97654258777, 3.86155507889, 1.45054649363, 2.74933829225, 2.09696092969, 3.15649919849, 1.45481561561, 5.07613841469, 4.9357296169, 5.17252304232, 6.09019191374, 6.25542463203, 6.29758693006, 5.57055012231, 5.52019500597],
			[7.05974839689, 2.97178072716, 4.64961742495, 5.87977804004, 7.6391815478, 8.55121423004, 10.1963025189, 11.1066475765, 1.0, 4.6929554937, 4.6669834091, 4.62911288534, 2.03025617987, 3.78119038028, 2.98099811072, 4.11835476181, 1.59723153112, 6.73064885914, 6.62688608762, 7.03251560028, 7.96567209384, 7.9931544814, 7.99209303569, 7.27813176265, 7.26395709561], 
			[5.94817618968, 2.98047185593, 3.94338878977, 5.10215932554, 6.35623406457, 6.93546084672, 8.35728836014, 8.90828390808, 1.0, 3.98996990559, 4.14730012975, 4.03618344427, 1.68730537362, 3.23670006881, 2.48855973959, 3.76408782268, 1.69563679774, 5.43784904142, 5.29101793332, 5.66541122962, 6.53131476292, 6.56471608808, 6.5759556029, 5.90557981513, 5.86617895934], 
			[7.6438755024, 2.96538201425, 4.85876054204, 6.37478439871, 7.84219382332, 9.14543948112, 10.7819584314, 11.2441548848, 1.0, 4.78171347933, 4.85244813287, 4.78617682862, 2.04350583494, 3.94124976952, 3.04815828402, 4.53756179591, 1.89986316624, 6.71392975227, 6.55156968539, 7.04501472427, 8.19822194073, 8.25487553558, 8.25869210105, 7.39306423257, 7.35406102551],
			[5.37248726908, 2.95805709001, 3.70943721381, 4.80418983791, 6.09163278029, 6.51618303084, 8.20167385455, 9.44411794871, 1.0, 4.00296728087, 4.20753664349, 4.06320568822, 1.48156586826, 3.00480162014, 2.28002887488, 3.39484461186, 1.24542587064, 5.26059671456, 5.14116816545, 5.506589011, 6.55024284479, 6.70325189921, 6.72756961838, 5.96935584939, 5.91056433697]])
y = np.array([[0], [1], [2], [3], [4]])

model = keras.Sequential()
model.add(keras.layers.Dense(8, input_dim=25, activation='softmax'))
model.add(keras.layers.Dense(5, activation='softmax'))

model.compile(loss='sparse_categorical_crossentropy', optimizer='adam')

model.fit(X, y, batch_size=1, epochs=5000)
print(model.predict_proba(X))

model.save('kerasFaceHash')

print(model.predict(np.array([[5.74817618968, 2.78047185593, 3.64338878977, 5.30215932554, 6.25623406457, 6.63546084672, 8.25728836014, 8.90828390808, 1.0, 3.98996990559, 4.14730012975, 4.03618344427, 1.68730537362, 3.23670006881, 2.48855973959, 3.76408782268, 1.69563679774, 5.43784904142, 5.29101793332, 5.66541122962, 6.53131476292, 6.56471608808, 6.5759556029, 5.95557981513, 5.76617895934]])))
print(model.predict(np.array([[5.97248726908, 2.98805709001, 3.70943721381, 4.80418983791, 6.09163278029, 6.51618303084, 8.20167385455, 9.44411794871, 1.0, 4.00296728087, 4.20753664349, 4.06320568822, 1.48156586826, 3.00480162014, 2.28002887488, 3.39484461186, 1.24542587064, 5.36059671456, 5.14116816545, 5.606589011, 6.55024284479, 6.20325189921, 6.32756961838, 5.86935584939, 5.81056433697]])))

'''
#X = numpy.asarray([[5.67469951822, 3.01786596509, 3.38644243788, 4.40128707661, 5.6145555955, 6.68856446685, 7.81805994584, 8.67407231537, 1.0, 3.80675806429, 3.97654258777, 3.86155507889, 1.45054649363, 2.74933829225, 2.09696092969, 3.15649919849, 1.45481561561, 5.07613841469, 4.9357296169, 5.17252304232, 6.09019191374, 6.25542463203, 6.29758693006, 5.57055012231, 5.52019500597], [7.05974839689, 2.97178072716, 4.64961742495, 5.87977804004, 7.6391815478, 8.55121423004, 10.1963025189, 11.1066475765, 1.0, 4.6929554937, 4.6669834091, 4.62911288534, 2.03025617987, 3.78119038028, 2.98099811072, 4.11835476181, 1.59723153112, 6.73064885914, 6.62688608762, 7.03251560028, 7.96567209384, 7.9931544814, 7.99209303569, 7.27813176265, 7.26395709561], [5.94817618968, 2.98047185593, 3.94338878977, 5.10215932554, 6.35623406457, 6.93546084672, 8.35728836014, 8.90828390808, 1.0, 3.98996990559, 4.14730012975, 4.03618344427, 1.68730537362, 3.23670006881, 2.48855973959, 3.76408782268, 1.69563679774, 5.43784904142, 5.29101793332, 5.66541122962, 6.53131476292, 6.56471608808, 6.5759556029, 5.90557981513, 5.86617895934], [7.6438755024, 2.96538201425, 4.85876054204, 6.37478439871, 7.84219382332, 9.14543948112, 10.7819584314, 11.2441548848, 1.0, 4.78171347933, 4.85244813287, 4.78617682862, 2.04350583494, 3.94124976952, 3.04815828402, 4.53756179591, 1.89986316624, 6.71392975227, 6.55156968539, 7.04501472427, 8.19822194073, 8.25487553558, 8.25869210105, 7.39306423257, 7.35406102551], [5.37248726908, 2.95805709001, 3.70943721381, 4.80418983791, 6.09163278029, 6.51618303084, 8.20167385455, 9.44411794871, 1.0, 4.00296728087, 4.20753664349, 4.06320568822, 1.48156586826, 3.00480162014, 2.28002887488, 3.39484461186, 1.24542587064, 5.26059671456, 5.14116816545, 5.506589011, 6.55024284479, 6.70325189921, 6.72756961838, 5.96935584939, 5.91056433697]])
#Y = numpy.asarray([[0], [0], [1], [0], [0]])

X = numpy.array([[1, 0, 0],
				[0, 1, 1],
				[1, 1, 1],
				[0, 0, 0],
				[1, 0, 1]])

Y = numpy.array([1, 0, 1, 0, 1])

model = keras.Sequential()
model.add(keras.layers.Dense(3, input_dim=3, activation='sigmoid'))
model.add(keras.layers.Dense(1, activation='softmax'))

model.compile(loss='mean_squared_error', optimizer='sgd', metrics=['accuracy'])

model.fit(X, Y, epochs=10)


# USE THIS TO RETRIEVE DATA
lines = [line.rstrip('\n') for line in open('dataStore.txt')]
main = []
for line in lines:
	split = line.split()
	temp = []
	for i in range(1, len(split)) :
		temp.append(float(split[i]))
	main.append(temp)

print(main)
'''